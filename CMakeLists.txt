cmake_minimum_required(VERSION 3.16.3)
project(TLA)

include(Engine/BuildTools/Init.cmake)

SetOption(FO_DEV_NAME "TLA")
SetOption(FO_NICE_NAME "FOnlineTLA")
SetOption(FO_AUTHOR_NAME "FODev")
SetOption(FO_GAME_VERSION "0.1.4")
SetOption(FO_SINGLEPLAYER NO)
SetOption(FO_ENABLE_3D NO)
SetOption(FO_ANGELSCRIPT_SCRIPTING YES)
SetOption(FO_NATIVE_SCRIPTING NO)
SetOption(FO_MONO_SCRIPTING NO)
SetOption(FO_DEFAULT_CONFIG LocalTest)
SetOption(FO_DEBUGGING_CONFIG Debugging)
SetOption(FO_MAPPER_CONFIG Mapper)
SetOption(FO_GENERATE_ANGELSCRIPT_CONTENT Scripts)
SetOption(FO_GEOMETRY HEXAGONAL)
SetOption(FO_APP_ICON Resources/TLA.ico)
SetOption(FO_MAKE_EXTERNAL_COMMANDS YES)
SetOption(FO_INFO_MARKDOWN_OUTPUT ${CMAKE_CURRENT_SOURCE_DIR})

SetOption(FO_BUILD_CLIENT ON)
SetOption(FO_BUILD_SERVER ON)
SetOption(FO_BUILD_EDITOR ON)
SetOption(FO_BUILD_MAPPER ON)
SetOption(FO_BUILD_ASCOMPILER ON)
SetOption(FO_BUILD_BAKER ON)
SetOption(FO_UNIT_TESTS ON)
SetOption(FO_OUTPUT_PATH ${CMAKE_CURRENT_SOURCE_DIR})

include(Engine/BuildTools/StartGeneration.cmake)

# Native code
AddEngineSource(COMMON Scripts/Extension/ContentMigration.cpp)
AddEngineSource(SERVER Scripts/Extension/ServerExtension.cpp)
AddEngineSource(CLIENT Scripts/Extension/ClientExtension.cpp)

# Content
AddContent(Configs)
AddContent(Scripts Scripts/Json)
AddContent(Maps)
AddContent(Critters Critters/Types)
AddContent(Items Items/Static Items/Custom)
AddContent(Dialogs)
AddContent(Texts)

# Resources
AddResources(FOnline Resources/FOnline)
AddResources(FOArt Resources/DataPacks/fo_art.zip Resources/DataPacks/fo_art_critters_h.zip)
AddResources(FOArt Resources/DataPacks/fo_art_critters_m.zip Resources/DataPacks/fo_art_critters_n.zip)
AddResources(BlackCombatArmor Resources/DataPacks/cablack.dat)
AddResources(Lieutenant Resources/DataPacks/lieutenant.dat)
AddResources(LongHairDude Resources/DataPacks/longhairdude.dat)
AddResources(FOSound Resources/DataPacks/fo_sound.zip)
AddResources(Music Resources/FOnlineMusic)
AddResources(Video Resources/FOnlineVideo)
AddResources(CommonData Resources/CommonData)
AddResources(ServerData Resources/ServerData)
AddResources(Mapper Resources/Mapper)

# AddResources( FTRobots Resources/DataPacks/ftrobots.bos )
# AddResources( VanBuren Resources/VanBuren )
# AddRawResources( Resources/Mapper )

# Test builds
CreatePackage(Dev LocalTest)
AddToPackage(Dev Client Windows win64 Profiling+OGL+Raw)
AddToPackage(Dev Server Windows win64 Profiling+Raw)
AddToPackage(Dev Editor Windows win64 Raw)
AddToPackage(Dev Mapper Windows win64 Raw Mapper)

CreatePackage(LinuxDev LocalTest)
AddToPackage(LinuxDev Client Linux x64 Raw)
AddToPackage(LinuxDev Server Linux x64 Raw)
AddToPackage(LinuxDev Editor Linux x64 Raw)
AddToPackage(LinuxDev Mapper Linux x64 Raw Mapper)

# Production builds
# CreatePackage( Production PublicGame )
# AddToPackage( Production Client Windows win64 Raw+Zip )
# AddToPackage( Production Server Windows win64 Raw+Zip )
# AddToPackage( Production Client Windows win32+win64 Raw )
# AddToPackage( Production Client Windows win32+win64 Wix )
# AddToPackage( Production Client Windows win32 Zip )
# AddToPackage( Production Client Android arm+arm64+x86 Apk )
# AddToPackage( Production Client Web wasm Raw )
# AddToPackage( Production Client macOS x64 Bundle )
# AddToPackage( Production Client iOS arm64 Bundle )
# AddToPackage( Production Client Linux x64 AppImage )
# AddToPackage( Production Server Windows win64 Raw )
# AddToPackage( Production Server Windows win64 Zip )
# AddToPackage( Production Server Linux x64 Raw )
# AddToPackage( Production Server Linux x64 Tar )
# AddToPackage( Production Server Linux x64 AppImage )

# Finalization
include(Engine/BuildTools/FinalizeGeneration.cmake)
